(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ViUpload=t()})(this,function(){"use strict";var _=Math.min;function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function t(e,t){return t={exports:{}},e(t,t.exports),t.exports}// 7.1.4 ToInteger
// 25.4.1.5 NewPromiseCapability(C)
function o(e){var t,o;this.promise=new e(function(e,r){if(t!==void 0||o!==void 0)throw TypeError("Bad Promise constructor");t=e,o=r}),this.resolve=F(t),this.reject=F(o)}function r(e){return Object.prototype.toString.call(e).slice(8,-1)}function l(e){var t=void 0,o=r(e);if("Array"===o)t=[];else if("Object"===o)t={};else return e;for(var a in e){var n=e[a],i=r(n);t[a]="Object"===i?l(n):"Array"===i?l(n):n}return t}/**
	 *
	 * 给target合并key(深度)
	 * @export
	 * @param {Object} to
	 * @param {Object} from
	 * @returns
	 */function a(e,t){for(var o in t)e[o]&&"object"===nn(e[o])?a(e[o],t[o]):e[o]=t[o]}/**
	 * 支持多参数的深度克隆
	 * 后面的优先级最大
	 * @export
	 * @param {Object} target
	 * @param {Object} rest
	 * @returns
	 */function n(e){for(var t=arguments.length,o=Array(1<t?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];for(var n,s=0;s<o.length;s++)n=l(o[s]),a(e,n);return e}function s(e,t,o){var r=e[t];bl(e,t,{get:function(){return r},set:function(e){r===e||(r=e,"function"==typeof o&&o(e))}})}function u(e,t){var o=new RegExp("(^|\\s)"+t+"(\\s|$)");return o.test(e.className)}function p(e,t){/* istanbul ignore if */if(!u(e,t)){var o=e.className.split(" ");o.push(t),e.className=o.join(" ")}}function d(e,t,o){e.children[0]?e.insertBefore(t,o):e.appendChild(t)}function c(e){var t=window.URL||window.webkitURL||window.mozURL;return e&&t?t.createObjectURL(e):""}function m(e){return new _l(function(t){var o=window.Image,r=new o;r.setAttribute("crossOrigin","anonymous"),r.src=e,r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var o=e.getContext("2d");o.drawImage(r,0,0,r.width,r.height);var l=e.toDataURL("image/png");r=null,t(l)}})}var E=Math.ceil,y=Math.floor,h=function(e){return isNaN(e=+e)?0:(0<e?y:E)(e)},x=/*#__PURE__*/Object.freeze({default:h,__moduleExports:h}),g=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e},v=/*#__PURE__*/Object.freeze({default:g,__moduleExports:g}),T=x&&h||x,z=v&&g||v,O=function(e){return function(t,o){var r,n,u=z(t)+"",s=T(o),i=u.length;return 0>s||s>=i?e?"":void 0:(r=u.charCodeAt(s),55296>r||56319<r||s+1===i||56320>(n=u.charCodeAt(s+1))||57343<n?e?u.charAt(s):r:e?u.slice(s,s+2):(r-55296<<10)+(n-56320)+65536)}},P=/*#__PURE__*/Object.freeze({default:O,__moduleExports:O}),S=!0,w=/*#__PURE__*/Object.freeze({default:S,__moduleExports:S}),I=t(function(e){// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self// eslint-disable-next-line no-new-func
:Function("return this")();"number"==typeof __g&&(__g=t)}),R=/*#__PURE__*/Object.freeze({default:I,__moduleExports:I}),L=t(function(e){var t=e.exports={version:"2.6.1"};"number"==typeof __e&&(__e=t)}),N=L.version,A=/*#__PURE__*/Object.freeze({default:L,__moduleExports:L,version:N}),M=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},D=/*#__PURE__*/Object.freeze({default:M,__moduleExports:M}),F=D&&M||D,V=function(e,t,o){return(F(e),void 0===t)?e:1===o?function(o){return e.call(t,o)}:2===o?function(o,r){return e.call(t,o,r)}:3===o?function(o,r,l){return e.call(t,o,r,l)}:function()/* ...args */{return e.apply(t,arguments)}},Y=/*#__PURE__*/Object.freeze({default:V,__moduleExports:V}),$=function(e){return"object"==typeof e?null!==e:"function"==typeof e},W=/*#__PURE__*/Object.freeze({default:$,__moduleExports:$}),H=W&&$||W,G=function(e){if(!H(e))throw TypeError(e+" is not an object!");return e},K=/*#__PURE__*/Object.freeze({default:G,__moduleExports:G}),B=function(e){try{return!!e()}catch(t){return!0}},U=/*#__PURE__*/Object.freeze({default:B,__moduleExports:B}),J=U&&B||U,Q=!J(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),q=/*#__PURE__*/Object.freeze({default:Q,__moduleExports:Q}),X=R&&I||R,Z=X.document,ee=H(Z)&&H(Z.createElement),b=function(e){return ee?Z.createElement(e):{}},C=/*#__PURE__*/Object.freeze({default:b,__moduleExports:b}),te=q&&Q||q,oe=C&&b||C,re=!te&&!J(function(){return 7!=Object.defineProperty(oe("div"),"a",{get:function(){return 7}}).a}),le=/*#__PURE__*/Object.freeze({default:re,__moduleExports:re}),ae=function(e,t){if(!H(e))return e;var o,r;if(t&&"function"==typeof(o=e.toString)&&!H(r=o.call(e)))return r;if("function"==typeof(o=e.valueOf)&&!H(r=o.call(e)))return r;if(!t&&"function"==typeof(o=e.toString)&&!H(r=o.call(e)))return r;throw TypeError("Can't convert object to primitive value")},ne=/*#__PURE__*/Object.freeze({default:ae,__moduleExports:ae}),ie=K&&G||K,se=le&&re||le,ue=ne&&ae||ne,pe=Object.defineProperty,de=te?Object.defineProperty:function(e,t,o){if(ie(e),t=ue(t,!0),ie(o),se)try{return pe(e,t,o)}catch(t){/* empty */}if("get"in o||"set"in o)throw TypeError("Accessors not supported!");return"value"in o&&(e[t]=o.value),e},f={f:de},fe=/*#__PURE__*/Object.freeze({default:f,__moduleExports:f,f:de}),ce=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},me=/*#__PURE__*/Object.freeze({default:ce,__moduleExports:ce}),_e=fe&&f||fe,Ee=me&&ce||me,ye=te?function(e,t,o){return _e.f(e,t,Ee(1,o))}:function(e,t,o){return e[t]=o,e},he=/*#__PURE__*/Object.freeze({default:ye,__moduleExports:ye}),xe={}.hasOwnProperty,ge=function(e,t){return xe.call(e,t)},ve=/*#__PURE__*/Object.freeze({default:ge,__moduleExports:ge}),be=A&&L||A,ke=Y&&V||Y,Te=he&&ye||he,ze=ve&&ge||ve,Oe="prototype",Pe=function(e,t,o){var r,l,a,n=e&Pe.F,i=e&Pe.G,s=e&Pe.S,u=e&Pe.P,p=e&Pe.B,d=e&Pe.W,f=i?be:be[t]||(be[t]={}),c=f[Oe],m=i?X:s?X[t]:(X[t]||{})[Oe];for(r in i&&(o=t),o)// contains in native
l=!n&&m&&void 0!==m[r],l&&ze(f,r)||(a=l?m[r]:o[r],f[r]=i&&"function"!=typeof m[r]?o[r]// bind timers to global for call from export context
:p&&l?ke(a,X)// wrap global constructors for prevent change them in library
:d&&m[r]==a?function(e){var t=function(t,o,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,o);}return new e(t,o,r)}return e.apply(this,arguments)};return t[Oe]=e[Oe],t;// make static versions for prototype methods
}(a):u&&"function"==typeof a?ke(Function.call,a):a,u&&((f.virtual||(f.virtual={}))[r]=a,e&Pe.R&&c&&!c[r]&&Te(c,r,a)))};Pe.F=1,Pe.G=2,Pe.S=4,Pe.P=8,Pe.B=16,Pe.W=32,Pe.U=64,Pe.R=128;// real proto method for `library`
var Se=Pe,we=/*#__PURE__*/Object.freeze({default:Se,__moduleExports:Se}),Ie=Te,Re=/*#__PURE__*/Object.freeze({default:Ie,__moduleExports:Ie}),Le={},Ne=/*#__PURE__*/Object.freeze({default:Le,__moduleExports:Le}),Ae={}.toString,Me=function(e){return Ae.call(e).slice(8,-1)},De=/*#__PURE__*/Object.freeze({default:Me,__moduleExports:Me}),Ce=De&&Me||De,je=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Ce(e)?e.split(""):Object(e)},Fe=/*#__PURE__*/Object.freeze({default:je,__moduleExports:je}),Ve=function(e){return(Fe&&je||Fe)(z(e))},Ye=/*#__PURE__*/Object.freeze({default:Ve,__moduleExports:Ve}),$e=function(e){return 0<e?_(T(e),9007199254740991):0;// pow(2, 53) - 1 == 9007199254740991
},We=/*#__PURE__*/Object.freeze({default:$e,__moduleExports:$e}),He=Math.max,Ge=function(e,t){return e=T(e),0>e?He(e+t,0):_(e,t)},Ke=/*#__PURE__*/Object.freeze({default:Ge,__moduleExports:Ge}),Be=Ye&&Ve||Ye,Ue=We&&$e||We,Je=function(e){return function(t,o,r){var l,a=Be(t),n=Ue(a.length),i=(Ke&&Ge||Ke)(r,n);// Array#includes uses SameValueZero equality algorithm
// eslint-disable-next-line no-self-compare
if(e&&o!=o){for(;n>i;)// eslint-disable-next-line no-self-compare
if(l=a[i++],l!=l)return!0;// Array#indexOf ignores holes, Array#includes - not
}else for(;n>i;i++)if((e||i in a)&&a[i]===o)return e||i||0;return!e&&-1}},Qe=/*#__PURE__*/Object.freeze({default:Je,__moduleExports:Je}),qe=w&&S||w,Xe=t(function(e){var t=X["__core-js_shared__"]||(X["__core-js_shared__"]={});(e.exports=function(e,o){return t[e]||(t[e]=o===void 0?{}:o)})("versions",[]).push({version:be.version,mode:qe?"pure":"global",copyright:"\xA9 2018 Denis Pushkarev (zloirock.ru)"})}),Ze=/*#__PURE__*/Object.freeze({default:Xe,__moduleExports:Xe}),et=0,tt=Math.random(),ot=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++et+tt).toString(36))},rt=/*#__PURE__*/Object.freeze({default:ot,__moduleExports:ot}),lt=Ze&&Xe||Ze,at=rt&&ot||rt,nt=lt("keys"),it=function(e){return nt[e]||(nt[e]=at(e))},st=/*#__PURE__*/Object.freeze({default:it,__moduleExports:it}),ut=st&&it||st,pt=(Qe&&Je||Qe)(!1),dt=ut("IE_PROTO"),ft=function(e,t){var o,r=Be(e),l=0,a=[];for(o in r)o!=dt&&ze(r,o)&&a.push(o);// Don't enum bug & hidden keys
for(;t.length>l;)ze(r,o=t[l++])&&(~pt(a,o)||a.push(o));return a},ct=/*#__PURE__*/Object.freeze({default:ft,__moduleExports:ft}),mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_t=/*#__PURE__*/Object.freeze({default:mt,__moduleExports:mt}),Et=ct&&ft||ct,yt=_t&&mt||_t,ht=Object.keys||function(e){return Et(e,yt)},xt=/*#__PURE__*/Object.freeze({default:ht,__moduleExports:ht}),gt=xt&&ht||xt,vt=te?Object.defineProperties:function(e,t){ie(e);for(var o,r=gt(t),l=r.length,a=0;l>a;)_e.f(e,o=r[a++],t[o]);return e},bt=/*#__PURE__*/Object.freeze({default:vt,__moduleExports:vt}),kt=X.document,Tt=kt&&kt.documentElement,zt=/*#__PURE__*/Object.freeze({default:Tt,__moduleExports:Tt}),Ot=zt&&Tt||zt,Pt=ut("IE_PROTO"),St=function(){/* empty */},wt="prototype",It=function(){// Thrash, waste and sodomy: IE GC bug
var e,t=oe("iframe"),o=yt.length,r="<",l=">";for(t.style.display="none",Ot.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+l+"document.F=Object"+r+"/script"+l),e.close(),It=e.F;o--;)delete It[wt][yt[o]];return It()},Rt=Object.create||function(e,t){var o;return null===e?o=It():(St[wt]=ie(e),o=new St,St[wt]=null,o[Pt]=e),void 0===t?o:(bt&&vt||bt)(o,t)},Lt=/*#__PURE__*/Object.freeze({default:Rt,__moduleExports:Rt}),Nt=t(function(e){var t=lt("wks"),o=X.Symbol,r="function"==typeof o,l=e.exports=function(e){return t[e]||(t[e]=r&&o[e]||(r?o:at)("Symbol."+e))};l.store=t}),At=/*#__PURE__*/Object.freeze({default:Nt,__moduleExports:Nt}),Mt=At&&Nt||At,Dt=_e.f,Ct=Mt("toStringTag"),jt=function(e,t,o){e&&!ze(e=o?e:e.prototype,Ct)&&Dt(e,Ct,{configurable:!0,value:t})},Ft=/*#__PURE__*/Object.freeze({default:jt,__moduleExports:jt}),Vt=Lt&&Rt||Lt,Yt=Ft&&jt||Ft,$t={};Te($t,Mt("iterator"),function(){return this});var Wt=function(e,t,o){e.prototype=Vt($t,{next:Ee(1,o)}),Yt(e,t+" Iterator")},Ht=/*#__PURE__*/Object.freeze({default:Wt,__moduleExports:Wt}),Gt=function(e){return Object(z(e))},Kt=/*#__PURE__*/Object.freeze({default:Gt,__moduleExports:Gt}),Bt=ut("IE_PROTO"),Ut=Object.prototype,Jt=Object.getPrototypeOf||function(e){return e=(Kt&&Gt||Kt)(e),ze(e,Bt)?e[Bt]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Ut:null},Qt=/*#__PURE__*/Object.freeze({default:Jt,__moduleExports:Jt}),qt=we&&Se||we,Xt=Re&&Ie||Re,Zt=Ne&&Le||Ne,eo=Mt("iterator"),to=!([].keys&&"next"in[].keys()),oo="keys",ro="values",lo=function(){return this},ao=function(e,t,o,r,l,a,n){(Ht&&Wt||Ht)(o,t,r);var i,s,u,p=function(e){return!to&&e in m?m[e]:e===oo?function(){return new o(this,e)}:e===ro?function(){return new o(this,e)}:function(){return new o(this,e)}},d=t+" Iterator",f=l==ro,c=!1,m=e.prototype,_=m[eo]||m["@@iterator"]||l&&m[l],E=_||p(l),y=l?f?p("entries"):E:void 0,h="Array"==t?m.entries||_:_;if(h&&(u=(Qt&&Jt||Qt)(h.call(new e)),u!==Object.prototype&&u.next&&(Yt(u,d,!0),!qe&&"function"!=typeof u[eo]&&Te(u,eo,lo))),f&&_&&_.name!==ro&&(c=!0,E=function(){return _.call(this)}),(!qe||n)&&(to||c||!m[eo])&&Te(m,eo,E),Zt[t]=E,Zt[d]=lo,l)if(i={values:f?E:p(ro),keys:a?E:p(oo),entries:y},n)for(s in i)s in m||Xt(m,s,i[s]);else qt(qt.P+qt.F*(to||c),t,i);return i},no=/*#__PURE__*/Object.freeze({default:ao,__moduleExports:ao}),io=no&&ao||no,so=(P&&O||P)(!0);io(String,"String",function(e){// target
this._t=e+"",this._i=0},function(){var e,t=this._t,o=this._i;return o>=t.length?{value:void 0,done:!0}:(e=so(t,o),this._i+=e.length,{value:e,done:!1})});var uo=function(){/* empty */},po=/*#__PURE__*/Object.freeze({default:uo,__moduleExports:uo}),fo=function(e,t){return{value:t,done:!!e}},co=/*#__PURE__*/Object.freeze({default:fo,__moduleExports:fo}),mo=po&&uo||po,_o=co&&fo||co,Eo=io(Array,"Array",function(e,t){// target
// next index
this._t=Be(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,o=this._i++;return!e||o>=e.length?(this._t=void 0,_o(1)):"keys"==t?_o(0,o):"values"==t?_o(0,e[o]):_o(0,[o,e[o]])},"values");Zt.Arguments=Zt.Array,mo("keys"),mo("values"),mo("entries");for(var yo=Mt("toStringTag"),ho="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),xo=0;xo<ho.length;xo++){var go=ho[xo],vo=X[go],bo=vo&&vo.prototype;bo&&!bo[yo]&&Te(bo,yo,go),Zt[go]=Zt.Array}// getting tag from 19.1.3.6 Object.prototype.toString()
var ko,To,zo,Oo=Mt("toStringTag"),Po="Arguments"==Ce(function(){return arguments}()),So=function(e,t){try{return e[t]}catch(t){/* empty */}},wo=function(e){var t,o,r;return e===void 0?"Undefined":null===e?"Null"// @@toStringTag case
:"string"==typeof(o=So(t=Object(e),Oo))?o// builtinTag case
:Po?Ce(t)// ES3 arguments fallback
:"Object"==(r=Ce(t))&&"function"==typeof t.callee?"Arguments":r},Io=/*#__PURE__*/Object.freeze({default:wo,__moduleExports:wo}),Ro=function(e,t,o,r){if(!(e instanceof t)||r!==void 0&&r in e)throw TypeError(o+": incorrect invocation!");return e},Lo=/*#__PURE__*/Object.freeze({default:Ro,__moduleExports:Ro}),No=function(t,o,e,r){try{return r?o(ie(e)[0],e[1]):o(e);// 7.4.6 IteratorClose(iterator, completion)
}catch(o){var l=t["return"];throw void 0!==l&&ie(l.call(t)),o}},Ao=/*#__PURE__*/Object.freeze({default:No,__moduleExports:No}),Mo=Mt("iterator"),Do=Array.prototype,Co=function(e){return e!==void 0&&(Zt.Array===e||Do[Mo]===e)},jo=/*#__PURE__*/Object.freeze({default:Co,__moduleExports:Co}),Fo=Io&&wo||Io,Vo=Mt("iterator"),Yo=be.getIteratorMethod=function(e){if(e!=null)return e[Vo]||e["@@iterator"]||Zt[Fo(e)]},$o=/*#__PURE__*/Object.freeze({default:Yo,__moduleExports:Yo}),Wo=t(function(e){var t={},o={},r=e.exports=function(e,r,l,a,n){var i,s,u,p,d=n?function(){return e}:($o&&Yo||$o)(e),c=ke(l,a,r?2:1),f=0;if("function"!=typeof d)throw TypeError(e+" is not iterable!");// fast case for arrays with default iterator
if((jo&&Co||jo)(d)){for(i=Ue(e.length);i>f;f++)if(p=r?c(ie(s=e[f])[0],s[1]):c(e[f]),p===t||p===o)return p;}else for(u=d.call(e);!(s=u.next()).done;)if(p=(Ao&&No||Ao)(u,c,s.value,r),p===t||p===o)return p};r.BREAK=t,r.RETURN=o}),Ho=/*#__PURE__*/Object.freeze({default:Wo,__moduleExports:Wo}),Go=Mt("species"),Ko=function(e,t){var o,r=ie(e).constructor;return r===void 0||(o=ie(r)[Go])==null?t:F(o)},Bo=/*#__PURE__*/Object.freeze({default:Ko,__moduleExports:Ko}),Uo=function(e,t,o){var r=o===void 0;switch(t.length){case 0:return r?e():e.call(o);case 1:return r?e(t[0]):e.call(o,t[0]);case 2:return r?e(t[0],t[1]):e.call(o,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(o,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(o,t[0],t[1],t[2],t[3]);}return e.apply(o,t)},Jo=/*#__PURE__*/Object.freeze({default:Uo,__moduleExports:Uo}),Qo=X.process,qo=X.setImmediate,Xo=X.clearImmediate,Zo=X.MessageChannel,er=X.Dispatch,tr=0,or={},rr="onreadystatechange",lr=function(){var e=+this;// eslint-disable-next-line no-prototype-builtins
if(or.hasOwnProperty(e)){var t=or[e];delete or[e],t()}},ar=function(e){lr.call(e.data)};// ES3 wrong here
qo&&Xo||(qo=function(e){for(var t=[],o=1;arguments.length>o;)t.push(arguments[o++]);return or[++tr]=function(){(Jo&&Uo||Jo)("function"==typeof e?e:Function(e),t)},ko(tr),tr},Xo=function(e){delete or[e]},"process"==Ce(Qo)?ko=function(e){Qo.nextTick(ke(lr,e,1))}:er&&er.now?ko=function(e){er.now(ke(lr,e,1))}:Zo?(To=new Zo,zo=To.port2,To.port1.onmessage=ar,ko=ke(zo.postMessage,zo,1)):X.addEventListener&&"function"==typeof postMessage&&!X.importScripts?(ko=function(e){X.postMessage(e+"","*")},X.addEventListener("message",ar,!1)):rr in oe("script")?ko=function(e){Ot.appendChild(oe("script"))[rr]=function(){Ot.removeChild(this),lr.call(e)}}:ko=function(e){setTimeout(ke(lr,e,1),0)});var nr={set:qo,clear:Xo},ir=nr.set,sr=nr.clear,ur=/*#__PURE__*/Object.freeze({default:nr,__moduleExports:nr,set:ir,clear:sr}),pr=ur&&nr||ur,dr=pr.set,fr=X.MutationObserver||X.WebKitMutationObserver,cr=X.process,mr=X.Promise,_r="process"==Ce(cr),Er=function(){var t,o,r,l=function(){var e,l;for(_r&&(e=cr.domain)&&e.exit();t;){l=t.fn,t=t.next;try{l()}catch(l){throw t?r():o=void 0,l}}o=void 0,e&&e.enter()};// Node.js
if(_r)r=function(){cr.nextTick(l)};else if(fr&&!(X.navigator&&X.navigator.standalone)){var a=!0,n=document.createTextNode("");// eslint-disable-line no-new
new fr(l).observe(n,{characterData:!0}),r=function(){n.data=a=!a}}else if(mr&&mr.resolve){// Promise.resolve without an argument throws an error in LG WebOS 2
var i=mr.resolve(void 0);r=function(){i.then(l)}}else r=function(){dr.call(X,l)};return function(e){var l={fn:e,next:void 0};o&&(o.next=l),t||(t=l,r()),o=l}},yr=/*#__PURE__*/Object.freeze({default:Er,__moduleExports:Er}),hr=function(e){return new o(e)},xr={f:hr},gr=/*#__PURE__*/Object.freeze({default:xr,__moduleExports:xr,f:hr}),vr=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}},br=/*#__PURE__*/Object.freeze({default:vr,__moduleExports:vr}),kr=X.navigator,Tr=kr&&kr.userAgent||"",zr=/*#__PURE__*/Object.freeze({default:Tr,__moduleExports:Tr}),Or=gr&&xr||gr,Pr=function(e,t){if(ie(e),H(t)&&t.constructor===e)return t;var o=Or.f(e),r=o.resolve;return r(t),o.promise},Sr=/*#__PURE__*/Object.freeze({default:Pr,__moduleExports:Pr}),wr=function(e,t,o){for(var r in t)o&&e[r]?e[r]=t[r]:Te(e,r,t[r]);return e},Ir=/*#__PURE__*/Object.freeze({default:wr,__moduleExports:wr}),Rr=Mt("species"),Lr=function(e){var t="function"==typeof be[e]?be[e]:X[e];te&&t&&!t[Rr]&&_e.f(t,Rr,{configurable:!0,get:function(){return this}})},Nr=/*#__PURE__*/Object.freeze({default:Lr,__moduleExports:Lr}),Ar=Mt("iterator"),Mr=!1;try{var Dr=[7][Ar]();Dr["return"]=function(){Mr=!0}}catch(t){/* empty */}var Cr,jr,Fr,Vr,Yr=function(e,t){if(!t&&!Mr)return!1;var o=!1;try{var r=[7],l=r[Ar]();l.next=function(){return{done:o=!0}},r[Ar]=function(){return l},e(r)}catch(t){/* empty */}return o},$r=/*#__PURE__*/Object.freeze({default:Yr,__moduleExports:Yr}),Wr=Ho&&Wo||Ho,Hr=Bo&&Ko||Bo,Gr=br&&vr||br,Kr=Sr&&Pr||Sr,Br=pr.set,Ur=(yr&&Er||yr)(),Jr="Promise",Qr=X.TypeError,qr=X.process,Xr=qr&&qr.versions,Zr=Xr&&Xr.v8||"",el=X[Jr],tl="process"==Fo(qr),ol=function(){/* empty */},rl=jr=Or.f,ll=!!function(){try{// correct subclassing with @@species support
var e=el.resolve(1),t=(e.constructor={})[Mt("species")]=function(e){e(ol,ol)};// unhandled rejections tracking support, NodeJS Promise without it fails @@species test
return(tl||"function"==typeof PromiseRejectionEvent)&&e.then(ol)instanceof t// v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables
// https://bugs.chromium.org/p/chromium/issues/detail?id=830565
// we can't detect it synchronously, so just check versions
&&0!==Zr.indexOf("6.6")&&-1===(zr&&Tr||zr).indexOf("Chrome/66")}catch(t){/* empty */}}(),al=function(e){var t;return!!(H(e)&&"function"==typeof(t=e.then))&&t},nl=function(e,t){if(!e._n){e._n=!0;var o=e._c;Ur(function(){for(var r=e._v,l=1==e._s,a=0,n=function(t){var o,a,n,i=l?t.ok:t.fail,s=t.resolve,u=t.reject,p=t.domain;try{i?(!l&&(2==e._h&&ul(e),e._h=1),!0===i?o=r:(p&&p.enter(),o=i(r),p&&(p.exit(),n=!0)),o===t.promise?u(Qr("Promise-chain cycle")):(a=al(o))?a.call(o,s,u):s(o)):u(r)}catch(t){p&&!n&&p.exit(),u(t)}};o.length>a;)n(o[a++]);// variable length - can't use forEach
e._c=[],e._n=!1,t&&!e._h&&il(e)})}},il=function(e){Br.call(X,function(){var t,o,r,l=e._v,a=sl(e);if(a&&(t=Gr(function(){tl?qr.emit("unhandledRejection",l,e):(o=X.onunhandledrejection)?o({promise:e,reason:l}):(r=X.console)&&r.error&&r.error("Unhandled promise rejection",l)}),e._h=tl||sl(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},sl=function(e){return 1!==e._h&&0===(e._a||e._c).length},ul=function(e){Br.call(X,function(){var t;tl?qr.emit("rejectionHandled",e):(t=X.onrejectionhandled)&&t({promise:e,reason:e._v})})},pl=function(e){var t=this;t._d||(// unwrap
t._d=!0,t=t._w||t,t._v=e,t._s=2,!t._a&&(t._a=t._c.slice()),nl(t,!0))},dl=function(e){var t,o=this;if(!o._d){o._d=!0,o=o._w||o;// unwrap
try{if(o===e)throw Qr("Promise can't be resolved itself");(t=al(e))?Ur(function(){var r={_w:o,_d:!1};// wrap
try{t.call(e,ke(dl,r,1),ke(pl,r,1))}catch(t){pl.call(r,t)}}):(o._v=e,o._s=1,nl(o,!1))}catch(t){pl.call({_w:o,_d:!1},t)}}};ll||(el=function(e){(Lo&&Ro||Lo)(this,el,Jr,"_h"),F(e),Cr.call(this);try{e(ke(dl,this,1),ke(pl,this,1))}catch(e){pl.call(this,e)}},Cr=function(){// <- awaiting reactions
// <- checked in isUnhandled reactions
// <- state
// <- done
// <- value
// <- rejection state, 0 - default, 1 - handled, 2 - unhandled
this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Cr.prototype=(Ir&&wr||Ir)(el.prototype,{// 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)
then:function(e,t){var o=rl(Hr(this,el));return o.ok="function"!=typeof e||e,o.fail="function"==typeof t&&t,o.domain=tl?qr.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&nl(this,!1),o.promise},// 25.4.5.1 Promise.prototype.catch(onRejected)
catch:function(e){return this.then(void 0,e)}}),Fr=function(){var e=new Cr;this.promise=e,this.resolve=ke(dl,e,1),this.reject=ke(pl,e,1)},Or.f=rl=function(e){return e===el||e===Vr?new Fr(e):jr(e)}),qt(qt.G+qt.W+qt.F*!ll,{Promise:el}),Yt(el,Jr),(Nr&&Lr||Nr)(Jr),Vr=be[Jr],qt(qt.S+qt.F*!ll,Jr,{// 25.4.4.5 Promise.reject(r)
reject:function(e){var t=rl(this),o=t.reject;return o(e),t.promise}}),qt(qt.S+qt.F*(qe||!ll),Jr,{// 25.4.4.6 Promise.resolve(x)
resolve:function(e){return Kr(qe&&this===Vr?el:this,e)}}),qt(qt.S+qt.F*!(ll&&($r&&Yr||$r)(function(e){el.all(e)["catch"](ol)})),Jr,{// 25.4.4.1 Promise.all(iterable)
all:function(e){var t=this,o=rl(t),r=o.resolve,l=o.reject,a=Gr(function(){var o=[],a=0,n=1;Wr(e,!1,function(e){var i=a++,s=!1;o.push(void 0),n++,t.resolve(e).then(function(e){s||(s=!0,o[i]=e,--n||r(o))},l)}),--n||r(o)});return a.e&&l(a.v),o.promise},// 25.4.4.4 Promise.race(iterable)
race:function(e){var t=this,o=rl(t),r=o.reject,l=Gr(function(){Wr(e,!1,function(e){t.resolve(e).then(o.resolve,r)})});return l.e&&r(l.v),o.promise}}),qt(qt.P+qt.R,"Promise",{finally:function(t){var o=Hr(this,be.Promise||X.Promise),e="function"==typeof t;return this.then(e?function(e){return Kr(o,t()).then(function(){return e})}:t,e?function(r){return Kr(o,t()).then(function(){throw r})}:t)}}),qt(qt.S,"Promise",{try:function(e){var t=Or.f(this),o=Gr(e);return(o.e?t.reject:t.resolve)(o.v),t.promise}});var fl=be.Promise,cl=/*#__PURE__*/Object.freeze({default:fl,__moduleExports:fl}),ml=t(function(e){e.exports={default:cl&&fl||cl,__esModule:!0}}),_l=e(ml),El=t(function(e,t){t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}}),yl=e(El);qt(qt.S+qt.F*!te,"Object",{defineProperty:_e.f});var hl=be.Object,xl=function(e,t,o){return hl.defineProperty(e,t,o)},gl=/*#__PURE__*/Object.freeze({default:xl,__moduleExports:xl}),vl=t(function(e){e.exports={default:gl&&xl||gl,__esModule:!0}}),bl=e(vl),kl=/*#__PURE__*/Object.freeze({default:bl,__moduleExports:vl}),Tl=t(function(e,t){t.__esModule=!0;var o=function(e){return e&&e.__esModule?e:{default:e}}(kl&&bl||kl);t.default=function(){function e(e,t){for(var r,l=0;l<t.length;l++)r=t[l],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}()}),zl=e(Tl),Ol=function(){function e(){yl(this,e),this.map={}}return zl(e,[{key:"on",value:function(e,t){return this.map[e]?void this.map[e].push(t):void(this.map[e]=[t])}},{key:"emit",value:function(e){for(var t=arguments.length,o=Array(1<t?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];this.map[e].forEach(function(e){e.apply(void 0,o)})}}]),e}();(function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===o?r.firstChild?r.insertBefore(l,r.firstChild):r.appendChild(l):r.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}})(".vi-upload-input-wrapper {\n  float: left;\n  overflow: hidden;\n}\n.vi-upload-input-wrapper .vi-upload-input-wrapper-box {\n  position: relative;\n  width: 80px;\n  height: 80px;\n  margin: 0 10px 10px 0;\n  box-sizing: border-box;\n  background-color: #fff;\n  box-shadow: 0 0 6px 2px rgba(0,0,0,0.08);\n  border-radius: 2px;\n}\n.vi-upload-input-wrapper .vi-upload-input-wrapper-box:before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 20px;\n  height: 2px;\n  background-color: #666;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n}\n.vi-upload-input-wrapper .vi-upload-input-wrapper-box:after {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 20px;\n  height: 2px;\n  background-color: #666;\n  -webkit-transform: translate(-50%, -50%) rotate(90deg);\n          transform: translate(-50%, -50%) rotate(90deg);\n}\n.vi-upload-input-wrapper .vi-upload-input-wrapper-box .vi-upload-input {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  font-size: 0;\n  opacity: 0;\n}\n.vi-upload-file {\n  float: left;\n  margin: 0 10px 10px 0;\n}\n.vi-upload-file .vi-upload-file-box {\n  position: relative;\n  width: 80px;\n  height: 80px;\n  box-sizing: border-box;\n  background-color: #fff;\n  box-shadow: 0 0 6px 2px rgba(0,0,0,0.08);\n  border-radius: 2px;\n  background-size: cover;\n}\n.vi-upload-file .vi-upload-file-box .vi-upload-file-delete {\n  position: absolute;\n  z-index: 2;\n  top: -36px;\n  right: -36px;\n  width: 80px;\n  height: 80px;\n  background: #000;\n  border-radius: 50%;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n}\n.vi-upload-file .vi-upload-file-box .vi-upload-file-delete:before {\n  content: '';\n  position: absolute;\n  width: 6px;\n  height: 45px;\n  top: 50%;\n  left: 50%;\n  border-radius: 6px;\n  background-color: #fff;\n  -webkit-transform: translate(-50%, -50%) rotate(135deg);\n          transform: translate(-50%, -50%) rotate(135deg);\n}\n.vi-upload-file .vi-upload-file-box .vi-upload-file-delete:after {\n  content: '';\n  position: absolute;\n  width: 6px;\n  height: 45px;\n  top: 50%;\n  left: 50%;\n  border-radius: 6px;\n  background-color: #fff;\n  -webkit-transform: translate(-50%, -50%) rotate(-135deg);\n          transform: translate(-50%, -50%) rotate(-135deg);\n}\n");var Pl=Mt,Sl={f:Pl},wl=/*#__PURE__*/Object.freeze({default:Sl,__moduleExports:Sl,f:Pl}),Il=wl&&Sl||wl,Rl=Il.f("iterator"),Ll=/*#__PURE__*/Object.freeze({default:Rl,__moduleExports:Rl}),Nl=t(function(e){e.exports={default:Ll&&Rl||Ll,__esModule:!0}}),Al=e(Nl),Ml=/*#__PURE__*/Object.freeze({default:Al,__moduleExports:Nl}),Dl=t(function(e){var t=at("meta"),o=_e.f,r=0,l=Object.isExtensible||function(){return!0},a=!J(function(){return l(Object.preventExtensions({}))}),n=function(e){o(e,t,{value:{i:"O"+ ++r,// object ID
w:{}// weak collections IDs
}})},i=e.exports={KEY:t,NEED:!1,fastKey:function(e,o){// return primitive with prefix
if(!H(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!ze(e,t)){// can't set metadata to uncaught frozen object
if(!l(e))return"F";// not necessary to add metadata
if(!o)return"E";// add missing metadata
n(e)}return e[t].i},getWeak:function(e,o){if(!ze(e,t)){// can't set metadata to uncaught frozen object
if(!l(e))return!0;// not necessary to add metadata
if(!o)return!1;// add missing metadata
n(e)}return e[t].w},onFreeze:function(e){return a&&i.NEED&&l(e)&&!ze(e,t)&&n(e),e}}}),Cl=Dl.KEY,jl=Dl.NEED,Fl=Dl.fastKey,Vl=Dl.getWeak,Yl=Dl.onFreeze,$l=/*#__PURE__*/Object.freeze({default:Dl,__moduleExports:Dl,KEY:Cl,NEED:jl,fastKey:Fl,getWeak:Vl,onFreeze:Yl}),Wl=_e.f,Hl=function(e){var t=be.Symbol||(be.Symbol=qe?{}:X.Symbol||{});"_"==e.charAt(0)||e in t||Wl(t,e,{value:Il.f(e)})},Gl=/*#__PURE__*/Object.freeze({default:Hl,__moduleExports:Hl}),Kl=Object.getOwnPropertySymbols,Bl={f:Kl},Ul=/*#__PURE__*/Object.freeze({default:Bl,__moduleExports:Bl,f:Kl}),Jl={}.propertyIsEnumerable,Ql={f:Jl},ql=/*#__PURE__*/Object.freeze({default:Ql,__moduleExports:Ql,f:Jl}),Xl=Ul&&Bl||Ul,Zl=ql&&Ql||ql,ea=function(e){var t=gt(e),o=Xl.f;if(o)for(var r,l=o(e),a=Zl.f,n=0;l.length>n;)a.call(e,r=l[n++])&&t.push(r);return t},ta=/*#__PURE__*/Object.freeze({default:ea,__moduleExports:ea}),oa=Array.isArray||function(e){return"Array"==Ce(e)},ra=/*#__PURE__*/Object.freeze({default:oa,__moduleExports:oa}),la=yt.concat("length","prototype"),aa=Object.getOwnPropertyNames||function(e){return Et(e,la)},na={f:aa},ia=/*#__PURE__*/Object.freeze({default:na,__moduleExports:na,f:aa}),sa=ia&&na||ia,ua=sa.f,pa={}.toString,da="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],fa=function(e){try{return ua(e)}catch(t){return da.slice()}},ca=function(e){return da&&"[object Window]"==pa.call(e)?fa(e):ua(Be(e))},ma={f:ca},_a=/*#__PURE__*/Object.freeze({default:ma,__moduleExports:ma,f:ca}),Ea=Object.getOwnPropertyDescriptor,ya=te?Ea:function(e,t){if(e=Be(e),t=ue(t,!0),se)try{return Ea(e,t)}catch(t){/* empty */}return ze(e,t)?Ee(!Zl.f.call(e,t),e[t]):void 0},ha={f:ya},xa=/*#__PURE__*/Object.freeze({default:ha,__moduleExports:ha,f:ya}),ga=Gl&&Hl||Gl,va=_a&&ma||_a,ba=xa&&ha||xa,ka=($l&&Dl||$l).KEY,Ta=ba.f,za=_e.f,Oa=va.f,Pa=X.Symbol,Sa=X.JSON,wa=Sa&&Sa.stringify,Ia="prototype",Ra=Mt("_hidden"),La=Mt("toPrimitive"),Na={}.propertyIsEnumerable,Aa=lt("symbol-registry"),Ma=lt("symbols"),Da=lt("op-symbols"),Ca=Object[Ia],ja="function"==typeof Pa,Fa=X.QObject,Va=!Fa||!Fa[Ia]||!Fa[Ia].findChild,Ya=te&&J(function(){return 7!=Vt(za({},"a",{get:function(){return za(this,"a",{value:7}).a}})).a})?function(e,t,o){var r=Ta(Ca,t);r&&delete Ca[t],za(e,t,o),r&&e!==Ca&&za(Ca,t,r)}:za,$a=function(e){var t=Ma[e]=Vt(Pa[Ia]);return t._k=e,t},Wa=ja&&"symbol"==typeof Pa.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Pa},Ha=function(e,t,o){return e===Ca&&Ha(Da,t,o),ie(e),t=ue(t,!0),ie(o),ze(Ma,t)?(o.enumerable?(ze(e,Ra)&&e[Ra][t]&&(e[Ra][t]=!1),o=Vt(o,{enumerable:Ee(0,!1)})):(!ze(e,Ra)&&za(e,Ra,Ee(1,{})),e[Ra][t]=!0),Ya(e,t,o)):za(e,t,o)},Ga=function(e,t){ie(e);for(var o,r=(ta&&ea||ta)(t=Be(t)),a=0,n=r.length;n>a;)Ha(e,o=r[a++],t[o]);return e},Ka=function(e){var t=Na.call(this,e=ue(e,!0));return(this!==Ca||!ze(Ma,e)||ze(Da,e))&&(!(t||!ze(this,e)||!ze(Ma,e)||ze(this,Ra)&&this[Ra][e])||t)},Ba=function(e,t){if(e=Be(e),t=ue(t,!0),e!==Ca||!ze(Ma,t)||ze(Da,t)){var o=Ta(e,t);return o&&ze(Ma,t)&&!(ze(e,Ra)&&e[Ra][t])&&(o.enumerable=!0),o}},Ua=function(e){for(var t,o=Oa(Be(e)),r=[],l=0;o.length>l;)ze(Ma,t=o[l++])||t==Ra||t==ka||r.push(t);return r},Ja=function(e){for(var t,o=e===Ca,r=Oa(o?Da:Be(e)),l=[],a=0;r.length>a;)ze(Ma,t=r[a++])&&(!o||ze(Ca,t))&&l.push(Ma[t]);return l};ja||(Pa=function(){if(this instanceof Pa)throw TypeError("Symbol is not a constructor!");var e=at(0<arguments.length?arguments[0]:void 0),t=function(o){this===Ca&&t.call(Da,o),ze(this,Ra)&&ze(this[Ra],e)&&(this[Ra][e]=!1),Ya(this,e,Ee(1,o))};return te&&Va&&Ya(Ca,e,{configurable:!0,set:t}),$a(e)},Xt(Pa[Ia],"toString",function(){return this._k}),ba.f=Ba,_e.f=Ha,sa.f=va.f=Ua,Zl.f=Ka,Xl.f=Ja,te&&!qe&&Xt(Ca,"propertyIsEnumerable",Ka,!0),Il.f=function(e){return $a(Mt(e))}),qt(qt.G+qt.W+qt.F*!ja,{Symbol:Pa});for(var Qa=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],qa=0;Qa.length>qa;)Mt(Qa[qa++]);for(var Xa=gt(Mt.store),Za=0;Xa.length>Za;)ga(Xa[Za++]);qt(qt.S+qt.F*!ja,"Symbol",{// 19.4.2.1 Symbol.for(key)
for:function(e){return ze(Aa,e+="")?Aa[e]:Aa[e]=Pa(e)},// 19.4.2.5 Symbol.keyFor(sym)
keyFor:function(e){if(!Wa(e))throw TypeError(e+" is not a symbol!");for(var t in Aa)if(Aa[t]===e)return t},useSetter:function(){Va=!0},useSimple:function(){Va=!1}}),qt(qt.S+qt.F*!ja,"Object",{// 19.1.2.2 Object.create(O [, Properties])
create:function(e,t){return t===void 0?Vt(e):Ga(Vt(e),t)},// 19.1.2.4 Object.defineProperty(O, P, Attributes)
defineProperty:Ha,// 19.1.2.3 Object.defineProperties(O, Properties)
defineProperties:Ga,// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)
getOwnPropertyDescriptor:Ba,// 19.1.2.7 Object.getOwnPropertyNames(O)
getOwnPropertyNames:Ua,// 19.1.2.8 Object.getOwnPropertySymbols(O)
getOwnPropertySymbols:Ja}),Sa&&qt(qt.S+qt.F*(!ja||J(function(){var e=Pa();// MS Edge converts symbol values to JSON as {}
// WebKit converts symbol values to JSON as null
// V8 throws on boxed symbols
return"[null]"!=wa([e])||"{}"!=wa({a:e})||"{}"!=wa(Object(e))})),"JSON",{stringify:function(e){for(var t,o,r=[e],l=1;arguments.length>l;)r.push(arguments[l++]);if(o=t=r[1],(H(t)||void 0!==e)&&!Wa(e))return(ra&&oa||ra)(t)||(t=function(e,t){if("function"==typeof o&&(t=o.call(this,e,t)),!Wa(t))return t}),r[1]=t,wa.apply(Sa,r);// IE8 returns string on undefined
}}),Pa[Ia][La]||Te(Pa[Ia],La,Pa[Ia].valueOf),Yt(Pa,"Symbol"),Yt(Math,"Math",!0),Yt(X.JSON,"JSON",!0),ga("asyncIterator"),ga("observable");var en=be.Symbol,tn=/*#__PURE__*/Object.freeze({default:en,__moduleExports:en}),on=t(function(e){e.exports={default:tn&&en||tn,__esModule:!0}}),rn=e(on),ln=/*#__PURE__*/Object.freeze({default:rn,__moduleExports:on}),an=t(function(e,t){function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=o(Ml&&Al||Ml),l=o(ln&&rn||ln),a="function"==typeof l.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":typeof e};t.default="function"==typeof l.default&&"symbol"===a(r.default)?function(e){return"undefined"==typeof e?"undefined":a(e)}:function(e){return e&&"function"==typeof l.default&&e.constructor===l.default&&e!==l.default.prototype?"symbol":"undefined"==typeof e?"undefined":a(e)}}),nn=e(an),sn={// 容器
el:"",// 上传文件的个数
max:1,// 文件的最大存储
maxSize:0,// 自定义的容器,下版本
slot:{}},un="addFiles",pn="changeFiles",dn="removeFiles",fn=function(){function e(t){yl(this,e),this.options=n({},sn,t),this.checkType(),this.init()}return zl(e,[{key:"init",value:function(){var e=this.initWrapper();e&&(this.initData(),this.listenEvent(),this.watch())}},{key:"checkType",value:function(){/#.+/.test(this.options.el)||console.error("type check failed for options \"el\". please use id selector"),"number"!=typeof this.options.maxSize&&console.error("type check failed for options \"maxSize\"."),"number"!=typeof this.options.max&&console.error("type check failed for options \"max\".")}},{key:"initWrapper",value:function(){var e=this.options.el.slice(1);return(this.el=document.getElementById(e),!this.el)?(console.error("cannot find selector #"+this.el+"."),!1):(this.createInput(),!0)}},{key:"initData",value:function(){this.imgList=[],this.restImgLength=this.options.max}},{key:"listenEvent",value:function(){var e=this;this.ViEvent=new Ol,this.ViEvent.on(un,function(t){"function"==typeof e.options.events[un]&&e.options.events[un](t)}),this.ViEvent.on(pn,function(t){"function"==typeof e.options.events[pn]&&e.options.events[pn](t)}),this.ViEvent.on(dn,function(t){"function"==typeof e.options.events[dn]&&e.options.events[dn](t)})}},{key:"watch",value:function(){this.watchRestImgLength()}},{key:"watchRestImgLength",value:function(){var e=this;s(this,"restImgLength",function(t){e.inputWrapper.style.display=0<t?"block":"none",e.ViEvent.emit(pn,e.imgList)})}},{key:"createInput",value:function(){var e=this;this.inputWrapper=document.createElement("div"),p(this.inputWrapper,"vi-upload-input-wrapper"),this.inputWrapper.innerHTML="<div class=\"vi-upload-input-wrapper-box\">\n                      <input class=\"vi-upload-input\"\n                        type=\"file\"\n                        multiple=\"multiple\"\n                        accept=\"image/*\" />\n                    </div>",this.el.appendChild(this.inputWrapper);var t=this.inputWrapper.getElementsByTagName("input")[0];t.onchange=function(t){for(var o=t.currentTarget,r=n({},o),l=r.files,a=[],s=0,u=l[s],p=[],d=function(){var e=u,t=c(e);e.url=t;var o=m(t).then(function(t){e.base64=t});p.push(o),a.push(u),u=l[++s]};a.length<l.length&&u;)d();_l.all([].concat(p)).then(function(){console.log("\u90FD\u52A0\u8F7D\u5B8C\u6BD5"),e.ViEvent.emit(un,a),e.showImg(a)})}}},{key:"showImg",value:function(e){for(var t=this,o=[],r=0,l=e[r];o.length<this.restImgLength&&l;)o.push(l),l=e[++r];for(var a,n=function(r){var e=o[r];if(e.size>t.options.maxSize)return console.warn("the size of "+r+"th picture exceeds the options maxSize"),"continue";t.imgList.push(e),t.restImgLength=t.options.max-t.imgList.length;var l=document.createElement("div");p(l,"vi-upload-file"),l.innerHTML="<div class=\"vi-upload-file-box\">\n                            <i class=\"vi-upload-file-delete\"></i>\n                          </div>";var a=l.getElementsByClassName("vi-upload-file-box")[0];a.style.backgroundImage="url("+e.url+")",l.appendChild(a),d(t.el,l,t.inputWrapper);var n=l.getElementsByClassName("vi-upload-file-delete")[0];n.onclick=function(o){o.stopPropagation();var e=t.imgList.splice(r,1);t.restImgLength=t.options.max-t.imgList.length,t.el.removeChild(l),t.ViEvent.emit(dn,e)}},s=0;s<o.length;s++)a=n(s),"continue"===a}}]),e}();return fn});
